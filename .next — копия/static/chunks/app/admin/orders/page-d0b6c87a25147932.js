(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[606],{5455:function(e,s,r){Promise.resolve().then(r.bind(r,7613))},9376:function(e,s,r){"use strict";var a=r(5475);r.o(a,"useParams")&&r.d(s,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}})},7613:function(e,s,r){"use strict";r.r(s);var a=r(7437),l=r(2265),c=r(9376),t=r(5368);s.default=()=>{let[e,s]=(0,l.useState)([]),[r,i]=(0,l.useState)("all"),[d,n]=(0,l.useState)("all"),[o,p]=(0,l.useState)(null),m=(0,c.useRouter)();(0,l.useEffect)(()=>{let e=localStorage.getItem("isAdmin");e&&"true"===e?p(!0):m.push("/admin/login")},[m]),(0,l.useEffect)(()=>{o&&u()},[r,d,o]);let u=async()=>{let e=t.O.from("orders").select("*");"processed"===r?e=e.eq("is_processed",!0):"unprocessed"===r&&(e=e.eq("is_processed",!1)),"tire"===d?e=e.eq("order_type","tire"):"rim"===d&&(e=e.eq("order_type","rim"));let{data:a,error:l}=await e;l?console.error("Ошибка при получении заказов:",l):s(a||[])},h=async(e,s)=>{let{error:r}=await t.O.from("orders").update({is_processed:!s}).eq("id",e);r||u()};return null===o?null:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Заказы"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"mr-4",children:"Фильтр по обработке:"}),(0,a.jsxs)("select",{value:r,onChange:e=>i(e.target.value),className:"p-2 border rounded",children:[(0,a.jsx)("option",{value:"all",children:"Все"}),(0,a.jsx)("option",{value:"processed",children:"Обработанные"}),(0,a.jsx)("option",{value:"unprocessed",children:"Необработанные"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"mr-4",children:"Фильтр по типу заказа:"}),(0,a.jsxs)("select",{value:d,onChange:e=>n(e.target.value),className:"p-2 border rounded",children:[(0,a.jsx)("option",{value:"all",children:"Все"}),(0,a.jsx)("option",{value:"tire",children:"Шины"}),(0,a.jsx)("option",{value:"rim",children:"Диски"})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full bg-white border",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-3 px-4 border",children:"Модель"}),(0,a.jsx)("th",{className:"py-3 px-4 border",children:"Цена"}),(0,a.jsx)("th",{className:"py-3 px-4 border",children:"Размер"}),(0,a.jsx)("th",{className:"py-3 px-4 border",children:"Имя покупателя"}),(0,a.jsx)("th",{className:"py-3 px-4 border",children:"Email"}),(0,a.jsx)("th",{className:"py-3 px-4 border",children:"Телефон"}),(0,a.jsx)("th",{className:"py-3 px-4 border",children:"Количество"}),(0,a.jsx)("th",{className:"py-3 px-4 border",children:"Дата создания"}),(0,a.jsx)("th",{className:"py-3 px-4 border",children:"Обработан"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-100 transition duration-150",children:[(0,a.jsx)("td",{className:"py-2 px-4 border",children:e.rim_model?"".concat(e.rim_model," ").concat(e.rim_name):e.tire_name}),(0,a.jsxs)("td",{className:"py-2 px-4 border",children:[e.tire_price||e.rim_price," BYN"]}),(0,a.jsx)("td",{className:"py-2 px-4 border",children:e.tire_size||e.rim_size}),(0,a.jsx)("td",{className:"py-2 px-4 border",children:e.buyer_name}),(0,a.jsx)("td",{className:"py-2 px-4 border",children:e.buyer_email}),(0,a.jsx)("td",{className:"py-2 px-4 border",children:e.buyer_phone}),(0,a.jsx)("td",{className:"py-2 px-4 border",children:e.quantity}),(0,a.jsx)("td",{className:"py-2 px-4 border",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)("td",{className:"py-2 px-4 border text-center",children:(0,a.jsx)("input",{type:"checkbox",checked:e.is_processed,onChange:()=>h(e.id,e.is_processed),className:"form-checkbox h-5 w-5"})})]},e.id))})]})})]})}},5368:function(e,s,r){"use strict";r.d(s,{O:function(){return a}});let a=(0,r(3777).eI)("https://ijedzibacsfdbekmkwuy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlqZWR6aWJhY3NmZGJla21rd3V5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjg3NTAxNDYsImV4cCI6MjA0NDMyNjE0Nn0.zG5n6c1xmP6QgagZqQnWVjBYX9uTqumxALAS7Trl6Ko")}},function(e){e.O(0,[777,971,117,744],function(){return e(e.s=5455)}),_N_E=e.O()}]);